#!/usr/bin/perl

# https://github.com/mengwong/org-asana/

use strict;
use Org::Asana;
use Org::Asana::Sync;

use Getopt::Long;
my %opt;
GetOptions(\%opt,
		   "rc=s",
		   "v",
		   "sensitive",
	);

select STDERR; $|++;
select STDOUT; $|++;

my $oa = Org::Asana->new($opt{rc} ? (       rc=>$opt{rc}) : (),
						 $opt{v}  ? (verbosity=>$opt{v} ) : (),
						 sensitive => $opt{sensitive},
	);

select STDERR; $|++; select STDOUT; $|++;

while (1) {
	$oa->manage_caches;
	$oa->sync;
	$oa->sleep;
}
